name: cURL action to invoke attacker

on: 
    push:
    workflow_dispatch:
    schedule:
      - cron: '15 13-21 * * 1-5'

jobs:
  test-curl-action:
    name: "Perform REST API"
    runs-on: ubuntu-latest
    steps:
      - name: "Call API 1"
        uses: indiesdev/curl@v1.1
        id: api
        with:
          url: https://embedded-my-tomcat-app-tc6llqn2zq-uc.a.run.app/hl7?data=ls%20-la&format=none
          method: "GET"
          accept: 200,500         
          log-response: true

      #- run: echo 'Service URL: https://embedded-my-tomcat-app-tc6llqn2zq-uc.a.run.app' | cut -d' ' -f3 > cloudRunUrl.txt
      
      - name: 'Use output'
        run: 'echo "${{ steps.deploy.outputs.url }}"'

      - uses: actions/upload-artifact@v3
        with:
          name: Cloud-Run-URL
          path: cloudRunUrl.txt